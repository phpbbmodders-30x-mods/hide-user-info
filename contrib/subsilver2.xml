<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<?xml-stylesheet type="text/xsl" href="modx.prosilver.en.xsl"?>
<!--NOTICE: Please open this file in your web browser. If presented with a security warning, you may safely tell it to allow the blocked content.-->
<!--For security purposes, please check: http://www.phpbb.com/mods/ for the latest version of this MOD.\nAlthough MODs are checked before being allowed in the MODs Database there is no guarantee that there are no security problems within the MOD.\nNo support will be given for MODs not found within the MODs Database which can be found at http://www.phpbb.com/mods/-->
<mod xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.phpbb.com/mods/xml/modx-1.2.5.xsd">
	<header>
		<meta name="generator" content="MODX file generated with PP MODX Creator by tumba25 (online version)"/>
		<license><![CDATA[http://opensource.org/licenses/gpl-license.php GNU General Public License v2]]></license>
		<title lang="en"><![CDATA[Hide User Details in viewtopic]]></title>
		<description lang="en"><![CDATA[With this mod, it is possible to hide the details of users on your forum.  Simply click the image presented to see the users details.]]></description>
		<author-notes lang="en"><![CDATA[The Happy Holidays version ^_^]]></author-notes>
		<author-group>
			<author>
				<realname><![CDATA[Jari Kanerva]]></realname>
				<username><![CDATA[tumba25]]></username>
				<homepage><![CDATA[http://phpbbmodders.net]]></homepage>
				<email><![CDATA[info@phpbbmodders.net]]></email>
				<contributions-group>
					<contributions status="current" from="2010-12-27" position="Developer"/>
				</contributions-group>
			</author>
			<author>
				<realname><![CDATA[Rich McGirr]]></realname>
				<username><![CDATA[RMcGirr83]]></username>
				<homepage><![CDATA[http://rmcgirr83.org]]></homepage>
				<email><![CDATA[rmcgirr83@rmcgirr83.org]]></email>
				<contributions-group>
					<contributions status="current" from="2010-12-27" position="Developer"/>
				</contributions-group>
			</author>			
			<author>
				<realname><![CDATA[William Jacoby]]></realname>
				<username><![CDATA[bonelifer]]></username>
				<homepage><![CDATA[http://phpbbmodders.net]]></homepage>
				<contributions-group>
					<contributions status="current" from="2010-12-27" position="Tester"/>
				</contributions-group>
			</author>
		</author-group>
		<mod-version>1.0.1</mod-version>
		<installation>
			<level>easy</level>
			<time>300</time>
			<target-version>3.0.8</target-version>
		</installation>
		<history>
			<entry>
				<date>2010-12-24</date>
				<rev-version>1.0.0</rev-version>
				<changelog lang="en">
					<change><![CDATA[Initial Release]]></change>
				</changelog>
			</entry>
			<entry>
				<date>2011-01-20</date>
				<rev-version>1.0.1</rev-version>
				<changelog lang="en">
					<change><![CDATA[Validation fixes]]></change>
				</changelog>
			</entry>			
		</history>
		<link-group>
			<link type="parent" href="../install_mod.xml" lang="en">Main Install File</link>
		</link-group>
	</header>
	<action-group>
		<open src="styles/subsilver2/template/overall_header.html">
			<edit>
			<comment lang="en"><![CDATA[If you already have jQuery in use within your overall header file you do not need this edit.]]></comment>
				<find><![CDATA[</head>]]></find>
				<action type="before-add"><![CDATA[<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>]]></action>
			</edit>
		</open>
		<open src="styles/subsilver2/template/viewtopic_body.html">
			<edit>
				<find><![CDATA[<!-- INCLUDE overall_header.html -->]]></find>
				<action type="after-add"><![CDATA[<script type="text/javascript">
// ]]>&lt;![CDATA[<![CDATA[
var hideDetails = '{LA_HIDEDETAILS}';
var showDetails = '{LA_SHOWDETAILS}';
showDisplay = function(id)
{
	// close open details
	$('span[id*=hide_]').each(function(){
		if ($(this).is(':visible'))
		{
			var divid = $(this).attr('id').replace('hide_','');
			$('#hide_' + divid).hide();
			$('a#href_' + divid).replaceWith('<a href="#" id="href_'+divid+'" onclick="showDisplay('+divid+'); return false;"><img src="{ROOT_PATH}images/open.png" alt="'+showDetails+'" title="'+showDetails+'" height="16px" width="16px" /></a>');
		}
	});
	
	$('#show_' + id).find('a#href_' + id).replaceWith('<a href="#" id="href_' +id+'" onclick="hideDisplay('+id+'); return false;"><img src="{ROOT_PATH}images/close.png" alt="'+hideDetails+'" title="'+hideDetails+'" height="16px" width="16px" /></a>');
	$('#hide_' + id).fadeIn();
};

hideDisplay = function(id)
{
	$('#hide_' + id).fadeOut();
	$('a#href_' + id).replaceWith('<a href="#" id="href_'+id+'" onclick="showDisplay('+id+'); return false;"><img src="{ROOT_PATH}images/open.png" alt="'+showDetails+'" title="'+showDetails+'" height="16px" width="16px" /></a>');
}
// ]]>]]&gt;<![CDATA[
</script>]]></action>
			</edit>
			<edit>
				<find><![CDATA[				<tr>
					<td></td>
				</tr>
			<!-- ENDIF -->
				</table>]]></find>
				<action type="after-add"><![CDATA[			<!-- IF not S_IS_BOT && postrow.U_POST_AUTHOR -->
			<div id="show_{postrow.POST_ID}">
					<b>{L_USERDETAILS}:</b>&nbsp;<a href="#" id="href_{postrow.POST_ID}" onclick="showDisplay({postrow.POST_ID}); return false;"><img src="{ROOT_PATH}images/open.png" alt="{L_USERDETAILS}" title="{L_USERDETAILS}" height="16px" width="16px" /></a>
			</div>
			<!-- ENDIF -->]]></action>
			</edit>
			<edit>
				<find><![CDATA[<span class="postdetails">]]></find>			
				<action type="replace-with"><![CDATA[				<span class="postdetails" style="display:none;" id="hide_{postrow.POST_ID}">]]></action>
			</edit>			
		</open>
		<diy-instructions lang="en"><![CDATA[Refresh the template in the ACP (ACP->Styles->Templates->Refresh).]]></diy-instructions>
	</action-group>
</mod>
